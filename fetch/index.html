<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduPortal ‚Äî Student System</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>

<!-- LOGIN PAGE -->
<div id="login-page">
  <div class="login-left">
    <div class="brand">Edu<span>Portal</span></div>
    <div class="login-hero">
      <h1>Your campus,<br><em>all in one</em><br>place.</h1>
      <p>Access student records, track performance, and manage your academic community with ease.</p>
    </div>
    <div class="login-dots"><span></span><span></span><span></span></div>
  </div>
  <div class="login-right">
    <div class="login-form-wrap">
      <h2>Welcome back</h2>
      <p class="sub">Sign in to access the student dashboard</p>
      <div class="field">
        <label for="username">Username</label>
        <input type="text" id="username" placeholder="Enter your username" autocomplete="username">
      </div>
      <div class="field">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password" autocomplete="current-password">
      </div>
      <button class="btn-login" id="loginBtn" onclick="doLogin()">Sign In</button>
      <div class="error-msg" id="errorMsg"></div>
      <div class="hint">
        <strong>Demo credentials:</strong><br>
        Use the username &amp; password configured in your <code>users.json</code> file on the server.
      </div>
    </div>
  </div>
</div>

<!-- DASHBOARD PAGE -->
<div id="dashboard-page">
  <div class="topbar">
    <div class="brand">Edu<span>Portal</span></div>
    <div class="topbar-right">
      <div class="user-badge">
        <div class="avatar" id="userAvatar">A</div>
        <span id="userName">Admin</span>
      </div>
      <button class="btn-logout" onclick="doLogout()">Sign out</button>
    </div>
  </div>
  <div class="dashboard-content">
    <div class="dash-header">
      <h2>Student Dashboard</h2>
      <p id="dashSubtitle">Loading student records...</p>
    </div>
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-label">Total Students</div>
        <div class="stat-value" id="statTotal">‚Äî</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Courses</div>
        <div class="stat-value accent" id="statCourses">‚Äî</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Latest Batch</div>
        <div class="stat-value accent2" id="statBatch">‚Äî</div>
      </div>
    </div>
    <div class="table-section">
      <div class="table-header">
        <h3>All Students</h3>
        <div class="table-toolbar">
          <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" id="searchInput" placeholder="Search students..." oninput="filterStudents()">
          </div>
          <button class="btn-add-student" onclick="openAddModal()">+ Add Student</button>
        </div>
      </div>
      <table>
        <thead>
          <tr>
            <th>Student ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Course</th>
            <th style="text-align:center">Year Level</th>
            <th style="text-align:center">Actions</th>
          </tr>
        </thead>
        <tbody id="studentTableBody">
          <tr class="loading-row"><td colspan="6">Fetching students...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ADD / EDIT MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-header">
      <h3 id="modalTitle">Add Student</h3>
      <button class="modal-close" onclick="closeModal()">‚úï</button>
    </div>
    <div class="modal-grid">
      <div class="field field-full">
        <label for="f_student_id">Student ID <span style="color:#e53e3e">*</span></label>
        <input type="text" id="f_student_id" placeholder="e.g. 2024-0001">
        <div class="form-error" id="err_student_id"></div>
      </div>
      <div class="field">
        <label for="f_first_name">First Name <span style="color:#e53e3e">*</span></label>
        <input type="text" id="f_first_name" placeholder="e.g. Juan">
        <div class="form-error" id="err_first_name"></div>
      </div>
      <div class="field">
        <label for="f_last_name">Last Name <span style="color:#e53e3e">*</span></label>
        <input type="text" id="f_last_name" placeholder="e.g. Dela Cruz">
        <div class="form-error" id="err_last_name"></div>
      </div>
      <div class="field field-full">
        <label for="f_email">Email <span style="color:#e53e3e">*</span></label>
        <input type="text" id="f_email" placeholder="e.g. juan@school.edu">
        <div class="form-error" id="err_email"></div>
      </div>
      <div class="field">
        <label for="f_course">Course</label>
        <input type="text" id="f_course" placeholder="e.g. BS Computer Science">
      </div>
      <div class="field">
        <label for="f_year_level">Year Level</label>
        <select id="f_year_level">
          <option value="1">1st Year</option>
          <option value="2">2nd Year</option>
          <option value="3">3rd Year</option>
          <option value="4">4th Year</option>
        </select>
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn-save" id="saveBtn" onclick="saveStudent()">Save Student</button>
    </div>
  </div>
</div>

<!-- DELETE CONFIRM -->
<div class="confirm-overlay" id="confirmOverlay">
  <div class="confirm-box">
    <div class="confirm-icon">üóëÔ∏è</div>
    <h4>Delete Student?</h4>
    <p id="confirmMsg">This action cannot be undone.</p>
    <div class="confirm-actions">
      <button class="btn-cancel" onclick="closeConfirm()">Cancel</button>
      <button class="btn-delete-confirm" id="confirmDeleteBtn" onclick="confirmDelete()">Yes, Delete</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script src="./js/app.js"></script>
</body>
</html>
